require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _srcDomainCustomerDetailSectionCustomerDetailVm = require("../../src/domain/customer-detail-section/CustomerDetailVm");

var _srcDomainCustomerDetailSectionCustomerDetailVm2 = _interopRequireDefault(_srcDomainCustomerDetailSectionCustomerDetailVm);

var espana = { id: 'ESP', descripcion: 'Espana' };
var companyName = 'AIDA';

var targetCustomer = {
    isCompany: false,
    name: 'alfredo',
    firstSurname: 'casado',
    secondSurname: 'bernardez',
    taxId: '124',
    address: 'joaquin lorenzo',
    city: 'madrid',
    state: 'madrid',
    country: 'spain',
    phoneNumber: '12435',
    email: 'a@b.es',
    birthDate: '01012000',
    id: undefined,
    disabled: false,
    gender: 'M',
    postalCode: '123',
    company: companyName
};

describe("CustomerVm should", function () {

    var translator = aidaCore.TranslationService({});
    var customerCreated = { id: "customerId", company: companyName };
    var actionFactory = createActionFactoryMock({ customerCreated: customerCreated, customerReceived: targetCustomer, customersFound: [] });
    var newCustomerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, newCustomerCallback: function newCustomerCallback(customerFromBackend) {
            return customerReceived = customerFromBackend;
        }, translator: translator });
    var customerReceived = undefined;

    it("call backend and callback when creating a customer", function () {
        spyOn(actionFactory.customer, "createCustomer").and.callThrough();

        fill(newCustomerVm)['with'](targetCustomer);
        newCustomerVm.isEdition(false);
        newCustomerVm.saveCustomer();

        expect(actionFactory.customer.createCustomer).toHaveBeenCalledWith(targetCustomer, jasmine.any(Function));
        expect(customerReceived.id).toBe(customerCreated.id);
        expect(customerReceived.company).toBe(customerCreated.company);
    });

    it("call backend and callback when editing a customer", function () {
        var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, customerEditedCallback: function customerEditedCallback(customerFromBackend) {
                return customerReceived = customerFromBackend;
            }, translator: translator });
        spyOn(actionFactory.customer, "editCustomer").and.callThrough();

        fill(customerVm)['with'](targetCustomer);
        customerVm.isEdition(true);
        customerVm.saveCustomer();

        expect(actionFactory.customer.editCustomer).toHaveBeenCalledWith(targetCustomer, jasmine.any(Function));
        expect(customerReceived.id).toBe(customerCreated.id);
        expect(customerReceived.company).toBe(customerCreated.company);
    });

    it("show customers coincidences if necessary when creating a new customer", function () {
        var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, newCustomerCallback: function newCustomerCallback(customerFromBackend) {
                return customerReceived = customerFromBackend;
            }, translator: translator });
        spyOn(actionFactory.customer, "searchCustomersDescriptions");

        fill(customerVm)['with'](targetCustomer);
        customerVm.isEdition(false);
        customerVm.saveCustomer();

        expect(actionFactory.customer.searchCustomersDescriptions).toHaveBeenCalledWith({ name: customerVm.name(), firstSurname: customerVm.firstSurname() }, jasmine.any(Function));
    });

    describe("validate", function () {
        it("customer is invalid when has not name", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ translator: translator });
            expect(customer.canSaveCustomer()).toBe(false);
        });

        it("customer is valid when has name", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ translator: translator });
            customer.name('anyName');
            expect(customer.canSaveCustomer()).toBe(true);
        });

        it("customer is valid if has an email and it is well formatted", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ translator: translator });
            customer.name('anyName');
            customer.email('a@a.com');
            expect(customer.canSaveCustomer()).toBe(true);
        });

        it("customer is invalid if has an email and it is bad formatted", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ translator: translator });
            customer.name('anyName');
            customer.email('a@');
            expect(customer.canSaveCustomer()).toBe(false);
        });
    });

    describe("show customer", function () {
        it("reset properties when call show without customerId", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });
            customer.name('someName');
            customer.company(companyName);
            customer.show();

            expect(customer.isShown()).toBe(true);
            expect(customer.name()).toBe(undefined);
            expect(customer.company()).toBe(undefined);
        });

        it("get customer from backend when call show with customerid", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });
            customer.show({ customerId: 'anyId' });

            expect(customer.name()).toBe(targetCustomer.name);
            expect(customer.firstSurname()).toBe(targetCustomer.firstSurname);
            expect(customer.secondSurname()).toBe(targetCustomer.secondSurname);
            expect(customer.taxId()).toBe(targetCustomer.taxId);
            expect(customer.address()).toBe(targetCustomer.address);
            expect(customer.city()).toBe(targetCustomer.city);
            expect(customer.state()).toBe(targetCustomer.state);
            expect(customer.country()).toBe(targetCustomer.country);
            expect(customer.phoneNumber()).toBe(targetCustomer.phoneNumber);
            expect(customer.email()).toBe(targetCustomer.email);
            expect(customer.birthDate()).toBe(targetCustomer.birthDate);
            expect(customer.gender()).toBe(targetCustomer.gender);
            expect(customer.postalCode()).toBe(targetCustomer.postalCode);
            expect(customer.id()).toBe(targetCustomer.id);
            expect(customer.disabled()).toBe(targetCustomer.disabled);
            expect(customer.company()).toBe(targetCustomer.company);
        });

        it("countries are loaded when show customer", function () {
            var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });
            customer.show();

            expect(customer.availableCountries().length).toBe(1);
            expect(customer.availableCountries()[0].id).toBe(espana.id);
            expect(customer.availableCountries()[0].description).toBe(espana.description);
        });
    });

    describe("do not hide customer form", function () {
        it("after editing from customer detail view", function () {
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, customerEditedCallback: function customerEditedCallback(customerFromBackend) {
                    return customerReceived = customerFromBackend;
                }, translator: translator, hideFormAfterSaving: false });

            fill(customerVm)['with'](targetCustomer);
            customerVm.show();
            customerVm.isEdition(true);
            customerVm.saveCustomer();

            expect(customerVm.isShown()).toBe(true);
        });
    });

    describe("detect coincidences", function () {
        it("show a selector with the customer if there is a customer with the same taxid", function () {
            var customersFound = [{ id: "customerId" }];
            var actionFactory = createActionFactoryMock({ customersFound: customersFound });
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });
            customerVm.taxId("anyTaxId");

            customerVm.searchByTaxId();

            expect(customerVm.customerSelector.visible()).toBe(true);
            expect(customerVm.customerSelector.selectableCustomers()[0].customer).toBe(customersFound[0]);
        });

        it("not show a selector if there is not any customer with the same taxid", function () {
            var actionFactory = createActionFactoryMock({ customersFound: [] });
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });
            customerVm.taxId("anyTaxId");

            customerVm.searchByTaxId();

            expect(customerVm.customerSelector.visible()).toBe(false);
        });

        it("not call search when taxId is empty", function () {
            var actionFactory = createActionFactoryMock({ customersFound: [{ id: "customerId" }] });
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });

            customerVm.searchByTaxId();

            expect(actionFactory.isSearchCalled()).toBe(false);
        });

        it("show a selector with customers that match the name and surname", function () {
            var customersFound = [{ id: "customerId" }, { id: "customerAnotherId" }];
            var actionFactory = createActionFactoryMock({ customersFound: customersFound });
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });
            customerVm.name("anyName");
            customerVm.firstSurname("anyFirstSurname");

            customerVm.searchLikeName();

            expect(customerVm.customerSelector.visible()).toBe(true);
            expect(customerVm.customerSelector.selectableCustomers()[0].customer).toBe(customersFound[0]);
            expect(customerVm.customerSelector.selectableCustomers()[1].customer).toBe(customersFound[1]);
        });

        it("not show a selector if there is not customer that matches name and surname", function () {
            var actionFactory = createActionFactoryMock({ customersFound: [] });
            spyOn(actionFactory.customer, "searchCustomersDescriptions");
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator, newCustomerCallback: function newCustomerCallback(customerFromBackend) {
                    return customerReceived = customerFromBackend;
                } });
            customerVm.name("anyName");
            customerVm.firstSurname("anyFirstSurname");

            customerVm.createCustomer();

            expect(actionFactory.customer.searchCustomersDescriptions).toHaveBeenCalled();
            expect(customerVm.customerSelector.visible()).toBe(false);
        });

        it("not call to search if name is undefined when trying to create a customer", function () {
            var actionFactory = createActionFactoryMock({ customersFound: [{ id: "customerId" }] });
            spyOn(actionFactory.customer, "searchCustomersDescriptions");
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator, newCustomerCallback: function newCustomerCallback(customerFromBackend) {
                    return customerReceived = customerFromBackend;
                } });
            customerVm.name();
            customerVm.firstSurname("anyFirstSurname");

            customerVm.createCustomer();

            expect(actionFactory.customer.searchCustomersDescriptions).not.toHaveBeenCalled();
        });

        it("not call to search if firstSurname is undefined", function () {
            var actionFactory = createActionFactoryMock({ customersFound: [{ id: "customerId" }] });
            spyOn(actionFactory.customer, "searchCustomersDescriptions");
            var customerVm = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator, newCustomerCallback: function newCustomerCallback(customerFromBackend) {
                    return customerReceived = customerFromBackend;
                } });
            customerVm.name("anyName");
            customerVm.firstSurname();

            customerVm.createCustomer();

            expect(actionFactory.customer.searchCustomersDescriptions).not.toHaveBeenCalled();
        });
    });

    var customer = (0, _srcDomainCustomerDetailSectionCustomerDetailVm2['default'])({ actionFactory: actionFactory, translator: translator });

    describe("set isCompany", function () {
        ['true', 'false'].forEach(function (isCompanyValue) {
            it("as [${isCompanyValue}]", function () {

                customer.show();

                customer.setIsCompany(isCompanyValue);

                expect(customer.isCompany()).toBe(isCompanyValue);
            });
        });
    });

    describe("check missing fields", function () {

        it("return true if user has set name", function () {
            customer.name(undefined);

            expect(customer.isNameMissing()).toBe(true);
        });
    });
});

function createActionFactoryMock(_ref) {
    var customerCreated = _ref.customerCreated;
    var customerReceived = _ref.customerReceived;
    var customersFound = _ref.customersFound;

    var _isSearchCalled = false;
    return {
        customer: {
            createCustomer: function createCustomer(customer, callback) {
                callback(customerCreated);
            },
            editCustomer: function editCustomer(customer, callback) {
                callback(customerCreated);
            },
            getCustomer: function getCustomer(customer, callback) {
                return callback(customerReceived);
            },
            searchCustomersDescriptions: function searchCustomersDescriptions(filters, callback) {
                _isSearchCalled = true;
                callback(customersFound);
            },
            getAllCountries: function getAllCountries(callback) {
                return callback([espana]);
            }
        },
        isSearchCalled: function isSearchCalled() {
            return _isSearchCalled;
        }
    };
}

function fill(customerVm) {
    return {
        'with': function _with(customer) {
            _.forOwn(customer, function (value, key) {
                var observable = customerVm[key];
                if (typeof observable === 'function') {
                    observable(value);
                } else {
                    throw 'not found observable ' + key + ' in customerDetailVm';
                }
            });
        }
    };
}

},{"../../src/domain/customer-detail-section/CustomerDetailVm":3}],2:[function(require,module,exports){
"use strict";

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _srcDomainCustomerDetailSectionCustomerSelector = require("../../src/domain/customer-detail-section/CustomerSelector");

var _srcDomainCustomerDetailSectionCustomerSelector2 = _interopRequireDefault(_srcDomainCustomerDetailSectionCustomerSelector);

describe("CustomerSelector should", function () {

    var customers = [{ id: 'customerId' }];

    it("call back with the selected item", function () {
        var selectedCustomer = undefined;
        var customerSelector = (0, _srcDomainCustomerDetailSectionCustomerSelector2["default"])(function (customer) {
            selectedCustomer = customer;
        });

        customerSelector.show(customers);
        customerSelector.selectWithoutTimeout(customers[0]);

        expect(selectedCustomer.id).toBe(customers[0].id);
    });

    it("not call back with the selected item when anyone is selected", function () {
        var selectedCustomer = undefined;
        var customerSelector = (0, _srcDomainCustomerDetailSectionCustomerSelector2["default"])(function (customer) {
            selectedCustomer = customer;
        });

        customerSelector.show(customers);
        customerSelector.close();

        expect(selectedCustomer).toBe(undefined);
    });

    it("call back with the selected item when has mandatory selection", function () {
        var selectedCustomer = undefined;
        var customerSelector = (0, _srcDomainCustomerDetailSectionCustomerSelector2["default"])(function (customer) {
            selectedCustomer = customer;
        });

        customerSelector.showWithMandatorySelection(customers);
        customerSelector.selectWithoutTimeout(customers[0]);

        expect(selectedCustomer.id).toBe(customers[0].id);
    });

    it("call back when no selected item", function () {
        var called = false;
        var noSelectionAction = function noSelectionAction() {
            called = true;
        };
        var customerSelector = (0, _srcDomainCustomerDetailSectionCustomerSelector2["default"])(function () {}, noSelectionAction);

        customerSelector.close();

        setTimeout(function () {
            return expect(called).toBe(true);
        }, 500); //Concensus
    });
});

describe("SelectableCustomer should", function () {

    var customer = { id: 'customerId' };

    it("call back with the customer", function () {
        var selectedCustomer = undefined;
        var selectableCustomer = (0, _srcDomainCustomerDetailSectionCustomerSelector.SelectableCustomer)(customer, function (selected) {
            selectedCustomer = selected;
        });

        selectableCustomer.select();

        expect(selectedCustomer.id).toBe(customer.id);
    });
});

},{"../../src/domain/customer-detail-section/CustomerSelector":4}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports['default'] = CustomerDetailVm;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _CustomerSelector = require('./CustomerSelector');

var _CustomerSelector2 = _interopRequireDefault(_CustomerSelector);

function CustomerDetailVm(_ref) {
    var actionFactory = _ref.actionFactory;
    var newCustomerCallback = _ref.newCustomerCallback;
    var customerEditedCallback = _ref.customerEditedCallback;
    var translator = _ref.translator;
    var _ref$isMissing = _ref.isMissing;
    var isMissing = _ref$isMissing === undefined ? function () {
        return false;
    } : _ref$isMissing;
    var _ref$hideFormAfterSaving = _ref.hideFormAfterSaving;
    var hideFormAfterSaving = _ref$hideFormAfterSaving === undefined ? true : _ref$hideFormAfterSaving;

    var availableCountries = ko.observableArray([]);
    var isShown = ko.observable(false);
    var hideForm = hideFormAfterSaving;
    var isCompany = ko.observable(false);
    var name = ko.observable("").extend({
        required: {
            message: translator.translate('SharedDomain.Validation.Required.Message')
        }
    });
    var firstSurname = ko.observable("");
    var secondSurname = ko.observable("");
    var taxId = ko.observable("");
    var address = ko.observable("");
    var city = ko.observable("");
    var state = ko.observable("");
    var country = ko.observable("");
    var phoneNumber = ko.observable("");
    var email = ko.observable("").extend({
        email: {
            message: translator.translate('SharedDomain.Validation.Email.Message')
        }
    });
    var birthDate = ko.observable("");
    var canSaveCustomer = ko.computed(function () {
        return isValid();
    });
    var customerSelector = (0, _CustomerSelector2['default'])(whenCustomerSelected, callServerToCreateCustomer);
    var isEdition = ko.observable(false);
    var customerId = undefined;
    var showCancel = ko.observable(true);
    var id = ko.observable();
    var disabled = ko.observable(false);
    var gender = ko.observable();
    var postalCode = ko.observable();
    var company = ko.observable();
    var genderOptions = [{ description: translator.translate('SharedDomain.Gender.Male'), id: 'Male' }, { description: translator.translate('SharedDomain.Gender.Female'), id: 'Female' }];
    var onCustomerCreatedCallback = newCustomerCallback;
    var onCustomerEditedCallback = customerEditedCallback;

    function isValid() {
        return name.isValid() && email.isValid();
    }

    function show() {
        var _ref2 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

        var customerId = _ref2.customerId;
        var whenSuccess = _ref2.whenSuccess;
        var _ref2$showCancelButton = _ref2.showCancelButton;
        var showCancelButton = _ref2$showCancelButton === undefined ? true : _ref2$showCancelButton;

        showCancel(showCancelButton);
        if (customerId) {
            showEdition({ customerId: customerId, whenSuccess: whenSuccess });
        } else {
            showCreation({ whenSuccess: whenSuccess });
        }
    }

    function showEdition() {
        var _ref3 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

        var customerId = _ref3.customerId;
        var whenSuccess = _ref3.whenSuccess;

        isEdition(true);
        onCustomerEditedCallback = whenSuccess || onCustomerEditedCallback;
        actionFactory.customer.getAllCountries(function (countries) {
            ko.utils.arrayPushAll(availableCountries, countries);
            actionFactory.customer.getCustomer(customerId, whenCustomerArrived);
        });
    }

    function showCreation() {
        var _ref4 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

        var whenSuccess = _ref4.whenSuccess;

        isEdition(false);
        onCustomerCreatedCallback = whenSuccess || onCustomerCreatedCallback;
        actionFactory.customer.getAllCountries(function (countries) {
            ko.utils.arrayPushAll(availableCountries, countries);
            whenCustomerArrived({});
        });
    }

    function hide() {
        isEdition(false);
        isShown(false);
    }

    function saveCustomer() {
        isEdition() ? editCustomer() : createCustomer();
    }

    function createCustomer() {
        if (checkCustomerCoincidencesConditions()) {
            searchLikeName();
        } else callServerToCreateCustomer();
    }

    function callServerToCreateCustomer() {
        actionFactory.customer.createCustomer(toJson(), whenCustomerCreated);
    }

    function searchLikeName() {
        actionFactory.customer.searchCustomersDescriptions({ name: name(), firstSurname: firstSurname() }, whenCustomersLikeNameArrived);
    }

    function editCustomer() {
        actionFactory.customer.editCustomer(toJson(), whenCustomerEdited);
    }

    function searchByTaxId() {
        if (isEdition()) return;

        if (taxId()) {
            actionFactory.customer.searchCustomersDescriptions({ taxId: taxId() }, whenCustomerByTaxIdArrived);
        }
    }

    function checkCustomerCoincidencesConditions() {
        if (isEdition()) return false;
        if (customerSelector.visible()) return false;
        if (!isCompany() && (!name() || !firstSurname())) return false;
        if (isCompany() && !name()) return false;
        return true;
    }

    function whenCustomerSelected(selectedCustomer) {
        if (!selectedCustomer) return;
        hide();
        onCustomerCreatedCallback(toCustomerDescription(selectedCustomer));
    }

    function toCustomerDescription(customer) {
        var description = customer.id + ' - ' + customer.name;
        if (customer.firstSurname) {
            description += ' ' + customer.firstSurname;
        }
        if (customer.secondSurname) {
            description += '' + customer.secondSurname;
        }
        if (customer.taxId) {
            description += ' - ' + customer.taxId;
        }
        return {
            id: customer.id,
            description: description
        };
    }

    function whenCustomerCreated(newCustomer) {
        if (hideForm) hide();
        onCustomerCreatedCallback(newCustomer);
    }

    function whenCustomerEdited(editCustomer) {
        if (hideForm) hide();
        onCustomerEditedCallback(editCustomer);
    }

    function whenCustomerArrived(receivedCustomer) {
        isShown(true);
        loadCustomerProperties(receivedCustomer);
    }

    function whenCustomerByTaxIdArrived(customers) {
        if (customers.length == 0) return;
        customerSelector.showWithMandatorySelection(customers);
    }

    function whenCustomersLikeNameArrived(customers) {
        if (customers.length == 0) callServerToCreateCustomer();else customerSelector.show(customers);
    }

    function toJson() {
        return {
            isCompany: isCompany(),
            name: name(),
            firstSurname: firstSurname(),
            secondSurname: secondSurname(),
            taxId: taxId(),
            address: address(),
            city: city(),
            state: state(),
            country: country(),
            phoneNumber: phoneNumber(),
            email: email(),
            birthDate: birthDate(),
            id: customerId,
            disabled: disabled(),
            gender: gender(),
            postalCode: postalCode(),
            company: company()
        };
    }

    function loadCustomerProperties(receivedCustomer) {
        customerId = receivedCustomer.id;
        isCompany(receivedCustomer.isCompany);
        name(receivedCustomer.name);
        firstSurname(receivedCustomer.firstSurname);
        secondSurname(receivedCustomer.secondSurname);
        taxId(receivedCustomer.taxId);
        address(receivedCustomer.address);
        city(receivedCustomer.city);
        state(receivedCustomer.state);
        country(receivedCustomer.country);
        phoneNumber(receivedCustomer.phoneNumber);
        email(receivedCustomer.email);
        birthDate(receivedCustomer.birthDate);
        id(receivedCustomer.id);
        disabled(receivedCustomer.disabled);
        gender(receivedCustomer.gender || undefined);
        postalCode(receivedCustomer.postalCode);
        company(receivedCustomer.company);
    }

    function setIsCompany(isCompanyValue) {
        isCompany(isCompanyValue);
    }

    function isNameMissing() {
        return name() == "" || name() == undefined;
    }

    return {
        isShown: isShown,
        hide: hide,
        show: show,
        canSaveCustomer: canSaveCustomer,
        createCustomer: createCustomer,
        searchByTaxId: searchByTaxId,
        searchLikeName: searchLikeName,
        isCompany: isCompany,
        name: name,
        firstSurname: firstSurname,
        secondSurname: secondSurname,
        taxId: taxId,
        address: address,
        state: state,
        country: country,
        phoneNumber: phoneNumber,
        email: email,
        birthDate: birthDate,
        city: city,
        company: company,
        customerSelector: customerSelector,
        availableCountries: availableCountries,
        isEdition: isEdition,
        showCancel: showCancel,
        id: id,
        disabled: disabled,
        gender: gender,
        postalCode: postalCode,
        saveCustomer: saveCustomer,
        isMissing: isMissing,
        isNameMissing: isNameMissing,
        setIsCompany: setIsCompany,
        translator: translator,
        genderOptions: genderOptions,
        props: {
            isShown: isShown,
            hide: hide,
            show: show,
            canSaveCustomer: canSaveCustomer,
            createCustomer: createCustomer,
            searchByTaxId: searchByTaxId,
            searchLikeName: searchLikeName,
            isCompany: isCompany,
            name: name,
            firstSurname: firstSurname,
            secondSurname: secondSurname,
            taxId: taxId,
            address: address,
            state: state,
            country: country,
            phoneNumber: phoneNumber,
            email: email,
            birthDate: birthDate,
            city: city,
            company: company,
            customerSelector: customerSelector,
            availableCountries: availableCountries,
            isEdition: isEdition,
            showCancel: showCancel,
            id: id,
            disabled: disabled,
            gender: gender,
            postalCode: postalCode,
            saveCustomer: saveCustomer,
            isMissing: isMissing,
            isNameMissing: isNameMissing,
            setIsCompany: setIsCompany,
            translator: translator,
            genderOptions: genderOptions
        }
    };
}

module.exports = exports['default'];

},{"./CustomerSelector":4}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports["default"] = CustomerSelector;
exports.SelectableCustomer = SelectableCustomer;

function CustomerSelector(whenItemSelected, noSelectionCallback) {
    var visible = ko.observable(false);
    var selectableCustomers = ko.observableArray();
    var mandatorySelection = ko.observable(false);

    function show(customers) {
        mandatorySelection(false);
        showModal(customers);
    }

    function showWithMandatorySelection(customers) {
        mandatorySelection(true);
        showModal(customers);
    }

    function showModal(customers) {
        visible(true);
        selectableCustomers().length = 0;
        ko.utils.arrayPushAll(selectableCustomers, _.map(customers, function (x) {
            return SelectableCustomer(x, select);
        }));
    }

    function select(selected) {
        visible(false);
        setTimeout(function () {
            return whenItemSelected(selected);
        }, 500);
    }

    function selectWithoutTimeout(selected) {
        visible(false);
        whenItemSelected(selected);
    }

    function close() {
        visible(false);
        setTimeout(function () {
            return noSelectionCallback();
        }, 500);
    }

    return { visible: visible, selectableCustomers: selectableCustomers, show: show, showWithMandatorySelection: showWithMandatorySelection, select: select, selectWithoutTimeout: selectWithoutTimeout, close: close, mandatorySelection: mandatorySelection };
}

function SelectableCustomer(customer, whenSelected) {

    function select() {
        whenSelected(customer);
    }

    return { select: select, customer: customer };
}

},{}],"aida-customers":[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports.exportApi = exportApi;

function exportApi() {
    return {};
}

var aidaCustomers = require('aida-customers').exportApi();
window.aidaCustomers = aidaCustomers;

},{"aida-customers":"aida-customers"}]},{},[1,2])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9Qcm9qZWN0cy9TSU1BMi9ORVQvQ3VzdG9tZXJzL0N1c3RvbWVycy5XZWIvU2NyaXB0cy9iaW4vdGVtcC9qcy9zcGVjL2RvbWFpbi9DdXN0b21lckRldGFpbFZtU3BlYy5qcyIsIkM6L1Byb2plY3RzL1NJTUEyL05FVC9DdXN0b21lcnMvQ3VzdG9tZXJzLldlYi9TY3JpcHRzL2Jpbi90ZW1wL2pzL3NwZWMvZG9tYWluL0N1c3RvbWVyU2VsZWN0b3JTcGVjLmpzIiwiQzovUHJvamVjdHMvU0lNQTIvTkVUL0N1c3RvbWVycy9DdXN0b21lcnMuV2ViL1NjcmlwdHMvYmluL3RlbXAvanMvc3JjL2RvbWFpbi9jdXN0b21lci1kZXRhaWwtc2VjdGlvbi9DdXN0b21lckRldGFpbFZtLmpzIiwiQzovUHJvamVjdHMvU0lNQTIvTkVUL0N1c3RvbWVycy9DdXN0b21lcnMuV2ViL1NjcmlwdHMvYmluL3RlbXAvanMvc3JjL2RvbWFpbi9jdXN0b21lci1kZXRhaWwtc2VjdGlvbi9DdXN0b21lclNlbGVjdG9yLmpzIiwiQzovUHJvamVjdHMvU0lNQTIvTkVUL0N1c3RvbWVycy9DdXN0b21lcnMuV2ViL1NjcmlwdHMvYmluL3RlbXAvanMvc3JjL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OzhEQ0E2QiwyREFBMkQ7Ozs7QUFFeEYsSUFBTSxNQUFNLEdBQUcsRUFBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUMsQ0FBQztBQUNqRCxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUM7O0FBRTNCLElBQU0sY0FBYyxHQUFHO0FBQ25CLGFBQVMsRUFBRSxLQUFLO0FBQ2hCLFFBQUksRUFBRSxTQUFTO0FBQ2YsZ0JBQVksRUFBRSxRQUFRO0FBQ3RCLGlCQUFhLEVBQUUsV0FBVztBQUMxQixTQUFLLEVBQUUsS0FBSztBQUNaLFdBQU8sRUFBRSxpQkFBaUI7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Ozs7Ozs7O0FDOUNNLFNBQVMsU0FBUyxHQUFHO0FBQ3hCLFdBQU8sRUFDTixDQUFDO0NBQ0w7O0FBRUQsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDNUQsTUFBTSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IEN1c3RvbWVyRGV0YWlsVm0gZnJvbSBcIi4uLy4uL3NyYy9kb21haW4vY3VzdG9tZXItZGV0YWlsLXNlY3Rpb24vQ3VzdG9tZXJEZXRhaWxWbVwiO1xyXG5cclxuY29uc3QgZXNwYW5hID0ge2lkOidFU1AnLCBkZXNjcmlwY2lvbjogJ0VzcGFuYSd9O1xyXG5jb25zdCBjb21wYW55TmFtZSA9ICdBSURBJztcclxuXHJcbmNvbnN0IHRhcmdldEN1c3RvbWVyID0geyBcclxuICAgIGlzQ29tcGFueTogZmFsc2UsIFxyXG4gICAgbmFtZTogJ2FsZnJlZG8nLCBcclxuICAgIGZpcnN0U3VybmFtZTogJ2Nhc2FkbycsIFxyXG4gICAgc2Vjb25kU3VybmFtZTogJ2Jlcm5hcmRleicsIFxyXG4gICAgdGF4SWQ6ICcxMjQnLCBcclxuICAgIGFkZHJlc3M6ICdqb2FxdWluIGxvcmVuem8nLCBcclxuICAgIGNpdHk6ICdtYWRyaWQnLCBcclxuICAgIHN0YXRlOiAnbWFkcmlkJywgXHJcbiAgICBjb3VudHJ5OiAnc3BhaW4nLCBcclxuICAgIHBob25lTnVtYmVyOiAnMTI0MzUnLCBcclxuICAgIGVtYWlsOiAnYUBiLmVzJywgXHJcbiAgICBiaXJ0aERhdGU6ICcwMTAxMjAwMCcsIFxyXG4gICAgaWQ6IHVuZGVmaW5lZCwgXHJcbiAgICBkaXNhYmxlZDogZmFsc2UsIFxyXG4gICAgZ2VuZGVyOiAnTScsXHJcbiAgICBwb3N0YWxDb2RlOiAnMTIzJyxcclxuICAgIGNvbXBhbnk6IGNvbXBhbnlOYW1lXHJcbn07XHJcblxyXG5kZXNjcmliZShcIkN1c3RvbWVyVm0gc2hvdWxkXCIsICgpID0+IHtcclxuXHJcbiAgICBjb25zdCB0cmFuc2xhdG9yID0gYWlkYUNvcmUuVHJhbnNsYXRpb25TZXJ2aWNlKHt9KTtcclxuICAgIGNvbnN0IGN1c3RvbWVyQ3JlYXRlZCA9IHsgaWQ6IFwiY3VzdG9tZXJJZFwiLCBjb21wYW55OiBjb21wYW55TmFtZSB9O1xyXG4gICAgY29uc3QgYWN0aW9uRmFjdG9yeSA9IGNyZWF0ZUFjdGlvbkZhY3RvcnlNb2NrKHsgY3VzdG9tZXJDcmVhdGVkLCBjdXN0b21lclJlY2VpdmVkOiB0YXJnZXRDdXN0b21lciwgY3VzdG9tZXJzRm91bmQ6IFtdIH0pO1xyXG4gICAgY29uc3QgbmV3Q3VzdG9tZXJWbSA9IEN1c3RvbWVyRGV0YWlsVm0oe2FjdGlvbkZhY3RvcnksIG5ld0N1c3RvbWVyQ2FsbGJhY2s6IChjdXN0b21lckZyb21CYWNrZW5kKSA9PiBjdXN0b21lclJlY2VpdmVkID0gY3VzdG9tZXJGcm9tQmFja2VuZCwgdHJhbnNsYXRvcn0pO1xyXG4gICAgbGV0IGN1c3RvbWVyUmVjZWl2ZWQ7XHJcbiAgICBcclxuICAgIGl0KFwiY2FsbCBiYWNrZW5kIGFuZCBjYWxsYmFjayB3aGVuIGNyZWF0aW5nIGEgY3VzdG9tZXJcIiwgKCkgPT4ge1xyXG4gICAgICAgIHNweU9uKGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIsXCJjcmVhdGVDdXN0b21lclwiKS5hbmQuY2FsbFRocm91Z2goKTtcclxuXHJcbiAgICAgICAgZmlsbChuZXdDdXN0b21lclZtKS53aXRoKHRhcmdldEN1c3RvbWVyKTtcclxuICAgICAgICBuZXdDdXN0b21lclZtLmlzRWRpdGlvbihmYWxzZSk7XHJcbiAgICAgICAgbmV3Q3VzdG9tZXJWbS5zYXZlQ3VzdG9tZXIoKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIuY3JlYXRlQ3VzdG9tZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRhcmdldEN1c3RvbWVyLCBqYXNtaW5lLmFueShGdW5jdGlvbikpO1xyXG4gICAgICAgIGV4cGVjdChjdXN0b21lclJlY2VpdmVkLmlkKS50b0JlKGN1c3RvbWVyQ3JlYXRlZC5pZCk7XHJcbiAgICAgICAgZXhwZWN0KGN1c3RvbWVyUmVjZWl2ZWQuY29tcGFueSkudG9CZShjdXN0b21lckNyZWF0ZWQuY29tcGFueSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcImNhbGwgYmFja2VuZCBhbmQgY2FsbGJhY2sgd2hlbiBlZGl0aW5nIGEgY3VzdG9tZXJcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbWVyVm0gPSBDdXN0b21lckRldGFpbFZtKHthY3Rpb25GYWN0b3J5LCBjdXN0b21lckVkaXRlZENhbGxiYWNrOiAoY3VzdG9tZXJGcm9tQmFja2VuZCkgPT4gY3VzdG9tZXJSZWNlaXZlZCA9IGN1c3RvbWVyRnJvbUJhY2tlbmQsIHRyYW5zbGF0b3J9KTtcclxuICAgICAgICBzcHlPbihhY3Rpb25GYWN0b3J5LmN1c3RvbWVyLFwiZWRpdEN1c3RvbWVyXCIpLmFuZC5jYWxsVGhyb3VnaCgpO1xyXG5cclxuICAgICAgICBmaWxsKGN1c3RvbWVyVm0pLndpdGgodGFyZ2V0Q3VzdG9tZXIpO1xyXG4gICAgICAgIGN1c3RvbWVyVm0uaXNFZGl0aW9uKHRydWUpO1xyXG4gICAgICAgIGN1c3RvbWVyVm0uc2F2ZUN1c3RvbWVyKCk7XHJcblxyXG4gICAgICAgIGV4cGVjdChhY3Rpb25GYWN0b3J5LmN1c3RvbWVyLmVkaXRDdXN0b21lcikudG9IYXZlQmVlbkNhbGxlZFdpdGgodGFyZ2V0Q3VzdG9tZXIsIGphc21pbmUuYW55KEZ1bmN0aW9uKSk7XHJcbiAgICAgICAgZXhwZWN0KGN1c3RvbWVyUmVjZWl2ZWQuaWQpLnRvQmUoY3VzdG9tZXJDcmVhdGVkLmlkKTtcclxuICAgICAgICBleHBlY3QoY3VzdG9tZXJSZWNlaXZlZC5jb21wYW55KS50b0JlKGN1c3RvbWVyQ3JlYXRlZC5jb21wYW55KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwic2hvdyBjdXN0b21lcnMgY29pbmNpZGVuY2VzIGlmIG5lY2Vzc2FyeSB3aGVuIGNyZWF0aW5nIGEgbmV3IGN1c3RvbWVyXCIsICgpID0+IHtcclxuICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgbmV3Q3VzdG9tZXJDYWxsYmFjazogKGN1c3RvbWVyRnJvbUJhY2tlbmQpID0+IGN1c3RvbWVyUmVjZWl2ZWQgPSBjdXN0b21lckZyb21CYWNrZW5kLCB0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgc3B5T24oYWN0aW9uRmFjdG9yeS5jdXN0b21lciwgXCJzZWFyY2hDdXN0b21lcnNEZXNjcmlwdGlvbnNcIik7IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGZpbGwoY3VzdG9tZXJWbSkud2l0aCh0YXJnZXRDdXN0b21lcik7XHJcbiAgICAgICAgY3VzdG9tZXJWbS5pc0VkaXRpb24oZmFsc2UpO1xyXG4gICAgICAgIGN1c3RvbWVyVm0uc2F2ZUN1c3RvbWVyKCk7XHJcblxyXG4gICAgICAgIGV4cGVjdChhY3Rpb25GYWN0b3J5LmN1c3RvbWVyLnNlYXJjaEN1c3RvbWVyc0Rlc2NyaXB0aW9ucykudG9IYXZlQmVlbkNhbGxlZFdpdGgoe25hbWU6IGN1c3RvbWVyVm0ubmFtZSgpLCBmaXJzdFN1cm5hbWU6IGN1c3RvbWVyVm0uZmlyc3RTdXJuYW1lKCl9LCBqYXNtaW5lLmFueShGdW5jdGlvbikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoXCJ2YWxpZGF0ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoXCJjdXN0b21lciBpcyBpbnZhbGlkIHdoZW4gaGFzIG5vdCBuYW1lXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBDdXN0b21lckRldGFpbFZtKHt0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5jYW5TYXZlQ3VzdG9tZXIoKSkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KFwiY3VzdG9tZXIgaXMgdmFsaWQgd2hlbiBoYXMgbmFtZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gQ3VzdG9tZXJEZXRhaWxWbSh7dHJhbnNsYXRvcn0pO1xyXG4gICAgICAgICAgICBjdXN0b21lci5uYW1lKCdhbnlOYW1lJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5jYW5TYXZlQ3VzdG9tZXIoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoXCJjdXN0b21lciBpcyB2YWxpZCBpZiBoYXMgYW4gZW1haWwgYW5kIGl0IGlzIHdlbGwgZm9ybWF0dGVkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBDdXN0b21lckRldGFpbFZtKHt0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyLm5hbWUoJ2FueU5hbWUnKTtcclxuICAgICAgICAgICAgY3VzdG9tZXIuZW1haWwoJ2FAYS5jb20nKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLmNhblNhdmVDdXN0b21lcigpKS50b0JlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdChcImN1c3RvbWVyIGlzIGludmFsaWQgaWYgaGFzIGFuIGVtYWlsIGFuZCBpdCBpcyBiYWQgZm9ybWF0dGVkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBDdXN0b21lckRldGFpbFZtKHt0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyLm5hbWUoJ2FueU5hbWUnKTtcclxuICAgICAgICAgICAgY3VzdG9tZXIuZW1haWwoJ2FAJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5jYW5TYXZlQ3VzdG9tZXIoKSkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZShcInNob3cgY3VzdG9tZXJcIiwgKCkgPT4ge1xyXG4gICAgICAgIGl0KFwicmVzZXQgcHJvcGVydGllcyB3aGVuIGNhbGwgc2hvdyB3aXRob3V0IGN1c3RvbWVySWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lciA9IEN1c3RvbWVyRGV0YWlsVm0oe2FjdGlvbkZhY3RvcnksIHRyYW5zbGF0b3J9KTtcclxuICAgICAgICAgICAgY3VzdG9tZXIubmFtZSgnc29tZU5hbWUnKTtcclxuICAgICAgICAgICAgY3VzdG9tZXIuY29tcGFueShjb21wYW55TmFtZSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5pc1Nob3duKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5uYW1lKCkpLnRvQmUodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLmNvbXBhbnkoKSkudG9CZSh1bmRlZmluZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdChcImdldCBjdXN0b21lciBmcm9tIGJhY2tlbmQgd2hlbiBjYWxsIHNob3cgd2l0aCBjdXN0b21lcmlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBDdXN0b21lckRldGFpbFZtKHthY3Rpb25GYWN0b3J5LCB0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyLnNob3coe2N1c3RvbWVySWQ6ICdhbnlJZCd9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5uYW1lKCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIubmFtZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5maXJzdFN1cm5hbWUoKSkudG9CZSh0YXJnZXRDdXN0b21lci5maXJzdFN1cm5hbWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIuc2Vjb25kU3VybmFtZSgpKS50b0JlKHRhcmdldEN1c3RvbWVyLnNlY29uZFN1cm5hbWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIudGF4SWQoKSkudG9CZSh0YXJnZXRDdXN0b21lci50YXhJZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5hZGRyZXNzKCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIuYWRkcmVzcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5jaXR5KCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIuY2l0eSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5zdGF0ZSgpKS50b0JlKHRhcmdldEN1c3RvbWVyLnN0YXRlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLmNvdW50cnkoKSkudG9CZSh0YXJnZXRDdXN0b21lci5jb3VudHJ5KTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLnBob25lTnVtYmVyKCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIucGhvbmVOdW1iZXIpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIuZW1haWwoKSkudG9CZSh0YXJnZXRDdXN0b21lci5lbWFpbCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5iaXJ0aERhdGUoKSkudG9CZSh0YXJnZXRDdXN0b21lci5iaXJ0aERhdGUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIuZ2VuZGVyKCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIuZ2VuZGVyKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLnBvc3RhbENvZGUoKSkudG9CZSh0YXJnZXRDdXN0b21lci5wb3N0YWxDb2RlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLmlkKCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIuaWQpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIuZGlzYWJsZWQoKSkudG9CZSh0YXJnZXRDdXN0b21lci5kaXNhYmxlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5jb21wYW55KCkpLnRvQmUodGFyZ2V0Q3VzdG9tZXIuY29tcGFueSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaXQoXCJjb3VudHJpZXMgYXJlIGxvYWRlZCB3aGVuIHNob3cgY3VzdG9tZXJcIiwgKCk9PntcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBDdXN0b21lckRldGFpbFZtKHthY3Rpb25GYWN0b3J5LCB0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyLnNob3coKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5hdmFpbGFibGVDb3VudHJpZXMoKS5sZW5ndGgpLnRvQmUoMSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lci5hdmFpbGFibGVDb3VudHJpZXMoKVswXS5pZCkudG9CZShlc3BhbmEuaWQpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIuYXZhaWxhYmxlQ291bnRyaWVzKClbMF0uZGVzY3JpcHRpb24pLnRvQmUoZXNwYW5hLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKFwiZG8gbm90IGhpZGUgY3VzdG9tZXIgZm9ybVwiLCAoKT0+e1xyXG4gICAgICAgIGl0KFwiYWZ0ZXIgZWRpdGluZyBmcm9tIGN1c3RvbWVyIGRldGFpbCB2aWV3XCIsKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgY3VzdG9tZXJFZGl0ZWRDYWxsYmFjazogKGN1c3RvbWVyRnJvbUJhY2tlbmQpID0+IGN1c3RvbWVyUmVjZWl2ZWQgPSBjdXN0b21lckZyb21CYWNrZW5kLCB0cmFuc2xhdG9yLCBoaWRlRm9ybUFmdGVyU2F2aW5nIDogZmFsc2V9KTtcclxuXHJcbiAgICAgICAgICAgIGZpbGwoY3VzdG9tZXJWbSkud2l0aCh0YXJnZXRDdXN0b21lcik7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0uc2hvdygpO1xyXG4gICAgICAgICAgICBjdXN0b21lclZtLmlzRWRpdGlvbih0cnVlKTtcclxuICAgICAgICAgICAgY3VzdG9tZXJWbS5zYXZlQ3VzdG9tZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lclZtLmlzU2hvd24oKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKFwiZGV0ZWN0IGNvaW5jaWRlbmNlc1wiLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoXCJzaG93IGEgc2VsZWN0b3Igd2l0aCB0aGUgY3VzdG9tZXIgaWYgdGhlcmUgaXMgYSBjdXN0b21lciB3aXRoIHRoZSBzYW1lIHRheGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXJzRm91bmQgPSBbeyBpZDogXCJjdXN0b21lcklkXCIgfV07XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbkZhY3RvcnkgPSBjcmVhdGVBY3Rpb25GYWN0b3J5TW9jayh7IGN1c3RvbWVyc0ZvdW5kIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgdHJhbnNsYXRvcn0pO1xyXG4gICAgICAgICAgICBjdXN0b21lclZtLnRheElkKFwiYW55VGF4SWRcIik7XHJcblxyXG4gICAgICAgICAgICBjdXN0b21lclZtLnNlYXJjaEJ5VGF4SWQoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lclZtLmN1c3RvbWVyU2VsZWN0b3IudmlzaWJsZSgpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXJWbS5jdXN0b21lclNlbGVjdG9yLnNlbGVjdGFibGVDdXN0b21lcnMoKVswXS5jdXN0b21lcikudG9CZShjdXN0b21lcnNGb3VuZFswXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KFwibm90IHNob3cgYSBzZWxlY3RvciBpZiB0aGVyZSBpcyBub3QgYW55IGN1c3RvbWVyIHdpdGggdGhlIHNhbWUgdGF4aWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25GYWN0b3J5ID0gY3JlYXRlQWN0aW9uRmFjdG9yeU1vY2soeyBjdXN0b21lcnNGb3VuZDogW10gfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyVm0gPSBDdXN0b21lckRldGFpbFZtKHthY3Rpb25GYWN0b3J5LCB0cmFuc2xhdG9yfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0udGF4SWQoXCJhbnlUYXhJZFwiKTtcclxuXHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0uc2VhcmNoQnlUYXhJZCgpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyVm0uY3VzdG9tZXJTZWxlY3Rvci52aXNpYmxlKCkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGl0KFwibm90IGNhbGwgc2VhcmNoIHdoZW4gdGF4SWQgaXMgZW1wdHlcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25GYWN0b3J5ID0gY3JlYXRlQWN0aW9uRmFjdG9yeU1vY2soeyBjdXN0b21lcnNGb3VuZDogW3sgaWQ6IFwiY3VzdG9tZXJJZFwiIH1dIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgdHJhbnNsYXRvcn0pO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBjdXN0b21lclZtLnNlYXJjaEJ5VGF4SWQoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChhY3Rpb25GYWN0b3J5LmlzU2VhcmNoQ2FsbGVkKCkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdChcInNob3cgYSBzZWxlY3RvciB3aXRoIGN1c3RvbWVycyB0aGF0IG1hdGNoIHRoZSBuYW1lIGFuZCBzdXJuYW1lXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXJzRm91bmQgPSBbeyBpZDogXCJjdXN0b21lcklkXCIgfSwgeyBpZDogXCJjdXN0b21lckFub3RoZXJJZFwiIH1dO1xyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25GYWN0b3J5ID0gY3JlYXRlQWN0aW9uRmFjdG9yeU1vY2soeyBjdXN0b21lcnNGb3VuZCB9KTtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXJWbSA9IEN1c3RvbWVyRGV0YWlsVm0oe2FjdGlvbkZhY3RvcnksIHRyYW5zbGF0b3J9KTtcclxuICAgICAgICAgICAgY3VzdG9tZXJWbS5uYW1lKFwiYW55TmFtZVwiKTtcclxuICAgICAgICAgICAgY3VzdG9tZXJWbS5maXJzdFN1cm5hbWUoXCJhbnlGaXJzdFN1cm5hbWVcIik7XHJcblxyXG4gICAgICAgICAgICBjdXN0b21lclZtLnNlYXJjaExpa2VOYW1lKCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXJWbS5jdXN0b21lclNlbGVjdG9yLnZpc2libGUoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyVm0uY3VzdG9tZXJTZWxlY3Rvci5zZWxlY3RhYmxlQ3VzdG9tZXJzKClbMF0uY3VzdG9tZXIpLnRvQmUoY3VzdG9tZXJzRm91bmRbMF0pO1xyXG4gICAgICAgICAgICBleHBlY3QoY3VzdG9tZXJWbS5jdXN0b21lclNlbGVjdG9yLnNlbGVjdGFibGVDdXN0b21lcnMoKVsxXS5jdXN0b21lcikudG9CZShjdXN0b21lcnNGb3VuZFsxXSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KFwibm90IHNob3cgYSBzZWxlY3RvciBpZiB0aGVyZSBpcyBub3QgY3VzdG9tZXIgdGhhdCBtYXRjaGVzIG5hbWUgYW5kIHN1cm5hbWVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25GYWN0b3J5ID0gY3JlYXRlQWN0aW9uRmFjdG9yeU1vY2soeyBjdXN0b21lcnNGb3VuZDogW10gfSk7XHJcbiAgICAgICAgICAgIHNweU9uKGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIsIFwic2VhcmNoQ3VzdG9tZXJzRGVzY3JpcHRpb25zXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgdHJhbnNsYXRvciwgbmV3Q3VzdG9tZXJDYWxsYmFjazogKGN1c3RvbWVyRnJvbUJhY2tlbmQpID0+IGN1c3RvbWVyUmVjZWl2ZWQgPSBjdXN0b21lckZyb21CYWNrZW5kfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0ubmFtZShcImFueU5hbWVcIik7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0uZmlyc3RTdXJuYW1lKFwiYW55Rmlyc3RTdXJuYW1lXCIpO1xyXG5cclxuICAgICAgICAgICAgY3VzdG9tZXJWbS5jcmVhdGVDdXN0b21lcigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZXhwZWN0KGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIuc2VhcmNoQ3VzdG9tZXJzRGVzY3JpcHRpb25zKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjdXN0b21lclZtLmN1c3RvbWVyU2VsZWN0b3IudmlzaWJsZSgpKS50b0JlKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoXCJub3QgY2FsbCB0byBzZWFyY2ggaWYgbmFtZSBpcyB1bmRlZmluZWQgd2hlbiB0cnlpbmcgdG8gY3JlYXRlIGEgY3VzdG9tZXJcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25GYWN0b3J5ID0gY3JlYXRlQWN0aW9uRmFjdG9yeU1vY2soeyBjdXN0b21lcnNGb3VuZDogW3sgaWQ6IFwiY3VzdG9tZXJJZFwiIH1dfSk7XHJcbiAgICAgICAgICAgIHNweU9uKGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIsIFwic2VhcmNoQ3VzdG9tZXJzRGVzY3JpcHRpb25zXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgdHJhbnNsYXRvciwgbmV3Q3VzdG9tZXJDYWxsYmFjazogKGN1c3RvbWVyRnJvbUJhY2tlbmQpID0+IGN1c3RvbWVyUmVjZWl2ZWQgPSBjdXN0b21lckZyb21CYWNrZW5kfSk7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0ubmFtZSgpO1xyXG4gICAgICAgICAgICBjdXN0b21lclZtLmZpcnN0U3VybmFtZShcImFueUZpcnN0U3VybmFtZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0uY3JlYXRlQ3VzdG9tZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChhY3Rpb25GYWN0b3J5LmN1c3RvbWVyLnNlYXJjaEN1c3RvbWVyc0Rlc2NyaXB0aW9ucykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoXCJub3QgY2FsbCB0byBzZWFyY2ggaWYgZmlyc3RTdXJuYW1lIGlzIHVuZGVmaW5lZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbkZhY3RvcnkgPSBjcmVhdGVBY3Rpb25GYWN0b3J5TW9jayh7IGN1c3RvbWVyc0ZvdW5kOiBbeyBpZDogXCJjdXN0b21lcklkXCIgfV0gfSk7XHJcbiAgICAgICAgICAgIHNweU9uKGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIsIFwic2VhcmNoQ3VzdG9tZXJzRGVzY3JpcHRpb25zXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21lclZtID0gQ3VzdG9tZXJEZXRhaWxWbSh7YWN0aW9uRmFjdG9yeSwgIHRyYW5zbGF0b3IsICBuZXdDdXN0b21lckNhbGxiYWNrOiAoY3VzdG9tZXJGcm9tQmFja2VuZCkgPT4gY3VzdG9tZXJSZWNlaXZlZCA9IGN1c3RvbWVyRnJvbUJhY2tlbmR9KTtcclxuICAgICAgICAgICAgY3VzdG9tZXJWbS5uYW1lKFwiYW55TmFtZVwiKTtcclxuICAgICAgICAgICAgY3VzdG9tZXJWbS5maXJzdFN1cm5hbWUoKTtcclxuXHJcbiAgICAgICAgICAgIGN1c3RvbWVyVm0uY3JlYXRlQ3VzdG9tZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChhY3Rpb25GYWN0b3J5LmN1c3RvbWVyLnNlYXJjaEN1c3RvbWVyc0Rlc2NyaXB0aW9ucykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBjdXN0b21lciA9IEN1c3RvbWVyRGV0YWlsVm0oe2FjdGlvbkZhY3RvcnksIHRyYW5zbGF0b3J9KTtcclxuXHJcbiAgICBkZXNjcmliZShcInNldCBpc0NvbXBhbnlcIiwgKCkgPT4ge1xyXG4gICAgICAgIFsndHJ1ZScsICdmYWxzZSddLmZvckVhY2goKGlzQ29tcGFueVZhbHVlKT0+e1xyXG4gICAgICAgICAgICBpdChcImFzIFske2lzQ29tcGFueVZhbHVlfV1cIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjdXN0b21lci5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VzdG9tZXIuc2V0SXNDb21wYW55KGlzQ29tcGFueVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QoY3VzdG9tZXIuaXNDb21wYW55KCkpLnRvQmUoaXNDb21wYW55VmFsdWUpOyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZShcImNoZWNrIG1pc3NpbmcgZmllbGRzXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICBpdChcInJldHVybiB0cnVlIGlmIHVzZXIgaGFzIHNldCBuYW1lXCIsICgpID0+IHtcclxuICAgICAgICAgICAgY3VzdG9tZXIubmFtZSh1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KGN1c3RvbWVyLmlzTmFtZU1pc3NpbmcoKSkudG9CZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgIH0pOyAgICBcclxufSk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVBY3Rpb25GYWN0b3J5TW9jayh7Y3VzdG9tZXJDcmVhdGVkLCBjdXN0b21lclJlY2VpdmVkLCBjdXN0b21lcnNGb3VuZH0pIHtcclxuICAgIGxldCBpc1NlYXJjaENhbGxlZCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjdXN0b21lcjoge1xyXG4gICAgICAgICAgICBjcmVhdGVDdXN0b21lcjogKGN1c3RvbWVyLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY3VzdG9tZXJDcmVhdGVkKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZWRpdEN1c3RvbWVyOiAoY3VzdG9tZXIsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXN0b21lckNyZWF0ZWQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRDdXN0b21lcjogKGN1c3RvbWVyLCBjYWxsYmFjaykgPT4gY2FsbGJhY2soY3VzdG9tZXJSZWNlaXZlZCksXHJcbiAgICAgICAgICAgIHNlYXJjaEN1c3RvbWVyc0Rlc2NyaXB0aW9uczogKGZpbHRlcnMsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpc1NlYXJjaENhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXN0b21lcnNGb3VuZCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldEFsbENvdW50cmllczogKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhbZXNwYW5hXSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzU2VhcmNoQ2FsbGVkOiAoKSA9PiBpc1NlYXJjaENhbGxlZFxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGZpbGwoY3VzdG9tZXJWbSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB3aXRoKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgIF8uZm9yT3duKGN1c3RvbWVyLCAodmFsdWUsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2YWJsZSA9IGN1c3RvbWVyVm1ba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JzZXJ2YWJsZSk9PT0nZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGBub3QgZm91bmQgb2JzZXJ2YWJsZSAke2tleX0gaW4gY3VzdG9tZXJEZXRhaWxWbWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJpbXBvcnQge2RlZmF1bHQgYXMgQ3VzdG9tZXJTZWxlY3RvciwgU2VsZWN0YWJsZUN1c3RvbWVyfSBmcm9tIFwiLi4vLi4vc3JjL2RvbWFpbi9jdXN0b21lci1kZXRhaWwtc2VjdGlvbi9DdXN0b21lclNlbGVjdG9yXCI7XHJcblxyXG5kZXNjcmliZShcIkN1c3RvbWVyU2VsZWN0b3Igc2hvdWxkXCIsICgpID0+IHtcclxuXHJcbiAgICBsZXQgY3VzdG9tZXJzID0gW3sgaWQ6ICdjdXN0b21lcklkJyB9XTtcclxuXHJcbiAgICBpdChcImNhbGwgYmFjayB3aXRoIHRoZSBzZWxlY3RlZCBpdGVtXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRDdXN0b21lcjtcclxuICAgICAgICBsZXQgY3VzdG9tZXJTZWxlY3RvciA9IEN1c3RvbWVyU2VsZWN0b3IoKGN1c3RvbWVyKSA9PiB7IHNlbGVjdGVkQ3VzdG9tZXIgPSBjdXN0b21lcjsgfSk7XHJcblxyXG4gICAgICAgIGN1c3RvbWVyU2VsZWN0b3Iuc2hvdyhjdXN0b21lcnMpO1xyXG4gICAgICAgIGN1c3RvbWVyU2VsZWN0b3Iuc2VsZWN0V2l0aG91dFRpbWVvdXQoY3VzdG9tZXJzWzBdKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHNlbGVjdGVkQ3VzdG9tZXIuaWQpLnRvQmUoY3VzdG9tZXJzWzBdLmlkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwibm90IGNhbGwgYmFjayB3aXRoIHRoZSBzZWxlY3RlZCBpdGVtIHdoZW4gYW55b25lIGlzIHNlbGVjdGVkXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRDdXN0b21lcjtcclxuICAgICAgICBsZXQgY3VzdG9tZXJTZWxlY3RvciA9IEN1c3RvbWVyU2VsZWN0b3IoKGN1c3RvbWVyKSA9PiB7IHNlbGVjdGVkQ3VzdG9tZXIgPSBjdXN0b21lcjsgfSk7XHJcblxyXG4gICAgICAgIGN1c3RvbWVyU2VsZWN0b3Iuc2hvdyhjdXN0b21lcnMpO1xyXG4gICAgICAgIGN1c3RvbWVyU2VsZWN0b3IuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHNlbGVjdGVkQ3VzdG9tZXIpLnRvQmUodW5kZWZpbmVkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwiY2FsbCBiYWNrIHdpdGggdGhlIHNlbGVjdGVkIGl0ZW0gd2hlbiBoYXMgbWFuZGF0b3J5IHNlbGVjdGlvblwiLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkQ3VzdG9tZXI7XHJcbiAgICAgICAgbGV0IGN1c3RvbWVyU2VsZWN0b3IgPSBDdXN0b21lclNlbGVjdG9yKChjdXN0b21lcikgPT4geyBzZWxlY3RlZEN1c3RvbWVyID0gY3VzdG9tZXI7IH0pO1xyXG5cclxuICAgICAgICBjdXN0b21lclNlbGVjdG9yLnNob3dXaXRoTWFuZGF0b3J5U2VsZWN0aW9uKGN1c3RvbWVycyk7XHJcbiAgICAgICAgY3VzdG9tZXJTZWxlY3Rvci5zZWxlY3RXaXRob3V0VGltZW91dChjdXN0b21lcnNbMF0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBleHBlY3Qoc2VsZWN0ZWRDdXN0b21lci5pZCkudG9CZShjdXN0b21lcnNbMF0uaWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJjYWxsIGJhY2sgd2hlbiBubyBzZWxlY3RlZCBpdGVtXCIsKCk9PntcclxuICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IG5vU2VsZWN0aW9uQWN0aW9uID0gKCkgPT4geyBjYWxsZWQgPSB0cnVlOyB9O1xyXG4gICAgICAgIGxldCBjdXN0b21lclNlbGVjdG9yID0gQ3VzdG9tZXJTZWxlY3RvcigoKSA9PiB7IH0sIG5vU2VsZWN0aW9uQWN0aW9uKTtcclxuXHJcbiAgICAgICAgY3VzdG9tZXJTZWxlY3Rvci5jbG9zZSgpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpPT4gZXhwZWN0KGNhbGxlZCkudG9CZSh0cnVlKSwgNTAwKTsgICAgICAgICAvL0NvbmNlbnN1c1xyXG4gICAgfSk7XHJcblxyXG59KTtcclxuXHJcbmRlc2NyaWJlKFwiU2VsZWN0YWJsZUN1c3RvbWVyIHNob3VsZFwiLCAoKSA9PiB7XHJcblxyXG4gICAgbGV0IGN1c3RvbWVyID0geyBpZDogJ2N1c3RvbWVySWQnIH07XHJcblxyXG4gICAgaXQoXCJjYWxsIGJhY2sgd2l0aCB0aGUgY3VzdG9tZXJcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZEN1c3RvbWVyO1xyXG4gICAgICAgIGxldCBzZWxlY3RhYmxlQ3VzdG9tZXIgPSBTZWxlY3RhYmxlQ3VzdG9tZXIoY3VzdG9tZXIsIChzZWxlY3RlZCkgPT4geyBzZWxlY3RlZEN1c3RvbWVyID0gc2VsZWN0ZWQ7IH0pO1xyXG5cclxuICAgICAgICBzZWxlY3RhYmxlQ3VzdG9tZXIuc2VsZWN0KCk7XHJcblxyXG4gICAgICAgIGV4cGVjdChzZWxlY3RlZEN1c3RvbWVyLmlkKS50b0JlKGN1c3RvbWVyLmlkKTtcclxuICAgIH0pO1xyXG5cclxufSk7IiwiaW1wb3J0IEN1c3RvbWVyU2VsZWN0b3IgZnJvbSAnLi9DdXN0b21lclNlbGVjdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEN1c3RvbWVyRGV0YWlsVm0oe2FjdGlvbkZhY3RvcnksIG5ld0N1c3RvbWVyQ2FsbGJhY2ssIGN1c3RvbWVyRWRpdGVkQ2FsbGJhY2ssIHRyYW5zbGF0b3IsIGlzTWlzc2luZyA9ICgpID0+IGZhbHNlLCBoaWRlRm9ybUFmdGVyU2F2aW5nID0gdHJ1ZX0pIHtcclxuXHJcbiAgICBsZXQgYXZhaWxhYmxlQ291bnRyaWVzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAgIGxldCBpc1Nob3duID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcbiAgICBsZXQgaGlkZUZvcm0gPSBoaWRlRm9ybUFmdGVyU2F2aW5nO1xyXG4gICAgbGV0IGlzQ29tcGFueSA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xyXG4gICAgbGV0IG5hbWUgPSBrby5vYnNlcnZhYmxlKFwiXCIpLmV4dGVuZCh7XHJcbiAgICAgICAgcmVxdWlyZWQ6IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogdHJhbnNsYXRvci50cmFuc2xhdGUoJ1NoYXJlZERvbWFpbi5WYWxpZGF0aW9uLlJlcXVpcmVkLk1lc3NhZ2UnKVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgbGV0IGZpcnN0U3VybmFtZSA9IGtvLm9ic2VydmFibGUoXCJcIik7XHJcbiAgICBsZXQgc2Vjb25kU3VybmFtZSA9IGtvLm9ic2VydmFibGUoXCJcIik7XHJcbiAgICBsZXQgdGF4SWQgPSBrby5vYnNlcnZhYmxlKFwiXCIpO1xyXG4gICAgbGV0IGFkZHJlc3MgPSBrby5vYnNlcnZhYmxlKFwiXCIpO1xyXG4gICAgbGV0IGNpdHkgPSBrby5vYnNlcnZhYmxlKFwiXCIpO1xyXG4gICAgbGV0IHN0YXRlID0ga28ub2JzZXJ2YWJsZShcIlwiKTtcclxuICAgIGxldCBjb3VudHJ5ID0ga28ub2JzZXJ2YWJsZShcIlwiKTtcclxuICAgIGxldCBwaG9uZU51bWJlciA9IGtvLm9ic2VydmFibGUoXCJcIik7XHJcbiAgICBsZXQgZW1haWwgPSBrby5vYnNlcnZhYmxlKFwiXCIpLmV4dGVuZCh7XHJcbiAgICAgICAgZW1haWw6IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogdHJhbnNsYXRvci50cmFuc2xhdGUoJ1NoYXJlZERvbWFpbi5WYWxpZGF0aW9uLkVtYWlsLk1lc3NhZ2UnKVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgbGV0IGJpcnRoRGF0ZSA9IGtvLm9ic2VydmFibGUoXCJcIik7XHJcbiAgICBsZXQgY2FuU2F2ZUN1c3RvbWVyID0ga28uY29tcHV0ZWQoKCkgPT4gaXNWYWxpZCgpKTtcclxuICAgIGxldCBjdXN0b21lclNlbGVjdG9yID0gQ3VzdG9tZXJTZWxlY3Rvcih3aGVuQ3VzdG9tZXJTZWxlY3RlZCwgY2FsbFNlcnZlclRvQ3JlYXRlQ3VzdG9tZXIpO1xyXG4gICAgbGV0IGlzRWRpdGlvbiA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xyXG4gICAgbGV0IGN1c3RvbWVySWQ7XHJcbiAgICBjb25zdCBzaG93Q2FuY2VsID0ga28ub2JzZXJ2YWJsZSh0cnVlKTtcclxuICAgIGNvbnN0IGlkID0ga28ub2JzZXJ2YWJsZSgpO1xyXG4gICAgY29uc3QgZGlzYWJsZWQgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICAgIGNvbnN0IGdlbmRlciA9IGtvLm9ic2VydmFibGUoKTtcclxuICAgIGNvbnN0IHBvc3RhbENvZGUgPSBrby5vYnNlcnZhYmxlKCk7XHJcbiAgICBjb25zdCBjb21wYW55ID0ga28ub2JzZXJ2YWJsZSgpO1xyXG4gICAgY29uc3QgZ2VuZGVyT3B0aW9ucyA9IFtcclxuICAgICAgICB7ZGVzY3JpcHRpb246IHRyYW5zbGF0b3IudHJhbnNsYXRlKCdTaGFyZWREb21haW4uR2VuZGVyLk1hbGUnKSwgaWQ6ICdNYWxlJ30sIFxyXG4gICAgICAgIHtkZXNjcmlwdGlvbjogdHJhbnNsYXRvci50cmFuc2xhdGUoJ1NoYXJlZERvbWFpbi5HZW5kZXIuRmVtYWxlJyksIGlkOidGZW1hbGUnfVxyXG4gICAgXTtcclxuICAgIGxldCBvbkN1c3RvbWVyQ3JlYXRlZENhbGxiYWNrID0gbmV3Q3VzdG9tZXJDYWxsYmFjaztcclxuICAgIGxldCBvbkN1c3RvbWVyRWRpdGVkQ2FsbGJhY2sgPSBjdXN0b21lckVkaXRlZENhbGxiYWNrO1xyXG5cclxuICAgIGZ1bmN0aW9uIGlzVmFsaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hbWUuaXNWYWxpZCgpICYmIGVtYWlsLmlzVmFsaWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93KHtjdXN0b21lcklkLCB3aGVuU3VjY2Vzcywgc2hvd0NhbmNlbEJ1dHRvbiA9IHRydWV9ID0ge30pIHtcclxuICAgICAgICBzaG93Q2FuY2VsKHNob3dDYW5jZWxCdXR0b24pO1xyXG4gICAgICAgIGlmIChjdXN0b21lcklkKSB7XHJcbiAgICAgICAgICAgIHNob3dFZGl0aW9uKHtjdXN0b21lcklkLCB3aGVuU3VjY2Vzc30pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNob3dDcmVhdGlvbih7d2hlblN1Y2Nlc3N9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0VkaXRpb24oe2N1c3RvbWVySWQsIHdoZW5TdWNjZXNzfSA9IHt9KSB7XHJcbiAgICAgICAgaXNFZGl0aW9uKHRydWUpO1xyXG4gICAgICAgIG9uQ3VzdG9tZXJFZGl0ZWRDYWxsYmFjayA9IHdoZW5TdWNjZXNzIHx8IG9uQ3VzdG9tZXJFZGl0ZWRDYWxsYmFjaztcclxuICAgICAgICBhY3Rpb25GYWN0b3J5LmN1c3RvbWVyLmdldEFsbENvdW50cmllcygoY291bnRyaWVzKSA9PiB7XHJcbiAgICAgICAgICAgIGtvLnV0aWxzLmFycmF5UHVzaEFsbChhdmFpbGFibGVDb3VudHJpZXMsIGNvdW50cmllcyk7XHJcbiAgICAgICAgICAgIGFjdGlvbkZhY3RvcnkuY3VzdG9tZXIuZ2V0Q3VzdG9tZXIoY3VzdG9tZXJJZCwgd2hlbkN1c3RvbWVyQXJyaXZlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0NyZWF0aW9uKHt3aGVuU3VjY2Vzc30gPSB7fSkge1xyXG4gICAgICAgIGlzRWRpdGlvbihmYWxzZSk7XHJcbiAgICAgICAgb25DdXN0b21lckNyZWF0ZWRDYWxsYmFjayA9IHdoZW5TdWNjZXNzIHx8IG9uQ3VzdG9tZXJDcmVhdGVkQ2FsbGJhY2s7XHJcbiAgICAgICAgYWN0aW9uRmFjdG9yeS5jdXN0b21lci5nZXRBbGxDb3VudHJpZXMoKGNvdW50cmllcykgPT4ge1xyXG4gICAgICAgICAgICBrby51dGlscy5hcnJheVB1c2hBbGwoYXZhaWxhYmxlQ291bnRyaWVzLCBjb3VudHJpZXMpO1xyXG4gICAgICAgICAgICB3aGVuQ3VzdG9tZXJBcnJpdmVkKHt9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoaWRlKCkge1xyXG4gICAgICAgIGlzRWRpdGlvbihmYWxzZSk7XHJcbiAgICAgICAgaXNTaG93bihmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZUN1c3RvbWVyKCkge1xyXG4gICAgICAgIGlzRWRpdGlvbigpID8gZWRpdEN1c3RvbWVyKCkgOiBjcmVhdGVDdXN0b21lcigpOyAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tZXIoKSB7XHJcbiAgICAgICAgaWYgKGNoZWNrQ3VzdG9tZXJDb2luY2lkZW5jZXNDb25kaXRpb25zKCkpIHtcclxuICAgICAgICAgICAgc2VhcmNoTGlrZU5hbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBjYWxsU2VydmVyVG9DcmVhdGVDdXN0b21lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNhbGxTZXJ2ZXJUb0NyZWF0ZUN1c3RvbWVyKCl7XHJcbiAgICAgICAgYWN0aW9uRmFjdG9yeS5jdXN0b21lci5jcmVhdGVDdXN0b21lcih0b0pzb24oKSwgd2hlbkN1c3RvbWVyQ3JlYXRlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VhcmNoTGlrZU5hbWUoKSB7XHJcbiAgICAgICAgYWN0aW9uRmFjdG9yeS5jdXN0b21lci5zZWFyY2hDdXN0b21lcnNEZXNjcmlwdGlvbnMoeyBuYW1lOiBuYW1lKCksIGZpcnN0U3VybmFtZTogZmlyc3RTdXJuYW1lKCkgfSwgd2hlbkN1c3RvbWVyc0xpa2VOYW1lQXJyaXZlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZWRpdEN1c3RvbWVyKCl7XHJcbiAgICAgICAgYWN0aW9uRmFjdG9yeS5jdXN0b21lci5lZGl0Q3VzdG9tZXIodG9Kc29uKCksIHdoZW5DdXN0b21lckVkaXRlZCk7ICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlYXJjaEJ5VGF4SWQoKSB7XHJcbiAgICAgICAgaWYgKGlzRWRpdGlvbigpKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRheElkKCkpIHtcclxuICAgICAgICAgICAgYWN0aW9uRmFjdG9yeS5jdXN0b21lci5zZWFyY2hDdXN0b21lcnNEZXNjcmlwdGlvbnMoeyB0YXhJZDogdGF4SWQoKSB9LCB3aGVuQ3VzdG9tZXJCeVRheElkQXJyaXZlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoZWNrQ3VzdG9tZXJDb2luY2lkZW5jZXNDb25kaXRpb25zKCl7XHJcbiAgICAgICAgaWYgKGlzRWRpdGlvbigpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGN1c3RvbWVyU2VsZWN0b3IudmlzaWJsZSgpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKCFpc0NvbXBhbnkoKSAmJiAoIW5hbWUoKSB8fCAhZmlyc3RTdXJuYW1lKCkpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGlzQ29tcGFueSgpICYmICFuYW1lKCkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB3aGVuQ3VzdG9tZXJTZWxlY3RlZChzZWxlY3RlZEN1c3RvbWVyKSB7XHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZEN1c3RvbWVyKSByZXR1cm47XHJcbiAgICAgICAgaGlkZSgpO1xyXG4gICAgICAgIG9uQ3VzdG9tZXJDcmVhdGVkQ2FsbGJhY2sodG9DdXN0b21lckRlc2NyaXB0aW9uKHNlbGVjdGVkQ3VzdG9tZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0b0N1c3RvbWVyRGVzY3JpcHRpb24oY3VzdG9tZXIpIHtcclxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBgJHtjdXN0b21lci5pZH0gLSAke2N1c3RvbWVyLm5hbWV9YDtcclxuICAgICAgICBpZiAoY3VzdG9tZXIuZmlyc3RTdXJuYW1lKSB7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uICs9IGAgJHtjdXN0b21lci5maXJzdFN1cm5hbWV9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1c3RvbWVyLnNlY29uZFN1cm5hbWUpIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gKz0gYCR7Y3VzdG9tZXIuc2Vjb25kU3VybmFtZX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VzdG9tZXIudGF4SWQpIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gKz0gYCAtICR7Y3VzdG9tZXIudGF4SWR9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IGN1c3RvbWVyLmlkLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdoZW5DdXN0b21lckNyZWF0ZWQobmV3Q3VzdG9tZXIpIHtcclxuICAgICAgICBpZiAoaGlkZUZvcm0pIGhpZGUoKTtcclxuICAgICAgICBvbkN1c3RvbWVyQ3JlYXRlZENhbGxiYWNrKG5ld0N1c3RvbWVyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gd2hlbkN1c3RvbWVyRWRpdGVkKGVkaXRDdXN0b21lcikge1xyXG4gICAgICAgIGlmIChoaWRlRm9ybSkgaGlkZSgpO1xyXG4gICAgICAgIG9uQ3VzdG9tZXJFZGl0ZWRDYWxsYmFjayhlZGl0Q3VzdG9tZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdoZW5DdXN0b21lckFycml2ZWQocmVjZWl2ZWRDdXN0b21lcikge1xyXG4gICAgICAgIGlzU2hvd24odHJ1ZSk7XHJcbiAgICAgICAgbG9hZEN1c3RvbWVyUHJvcGVydGllcyhyZWNlaXZlZEN1c3RvbWVyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB3aGVuQ3VzdG9tZXJCeVRheElkQXJyaXZlZChjdXN0b21lcnMpIHtcclxuICAgICAgICBpZiAoY3VzdG9tZXJzLmxlbmd0aCA9PSAwKSByZXR1cm47XHJcbiAgICAgICAgY3VzdG9tZXJTZWxlY3Rvci5zaG93V2l0aE1hbmRhdG9yeVNlbGVjdGlvbihjdXN0b21lcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHdoZW5DdXN0b21lcnNMaWtlTmFtZUFycml2ZWQoY3VzdG9tZXJzKSB7XHJcbiAgICAgICAgaWYgKGN1c3RvbWVycy5sZW5ndGggPT0gMCkgY2FsbFNlcnZlclRvQ3JlYXRlQ3VzdG9tZXIoKTtcclxuICAgICAgICBlbHNlIGN1c3RvbWVyU2VsZWN0b3Iuc2hvdyhjdXN0b21lcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvSnNvbigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpc0NvbXBhbnk6IGlzQ29tcGFueSgpLFxyXG4gICAgICAgICAgICBuYW1lOiBuYW1lKCksXHJcbiAgICAgICAgICAgIGZpcnN0U3VybmFtZTogZmlyc3RTdXJuYW1lKCksXHJcbiAgICAgICAgICAgIHNlY29uZFN1cm5hbWU6IHNlY29uZFN1cm5hbWUoKSxcclxuICAgICAgICAgICAgdGF4SWQ6IHRheElkKCksXHJcbiAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3MoKSxcclxuICAgICAgICAgICAgY2l0eTogY2l0eSgpLFxyXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUoKSxcclxuICAgICAgICAgICAgY291bnRyeTogY291bnRyeSgpLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVOdW1iZXIoKSxcclxuICAgICAgICAgICAgZW1haWw6IGVtYWlsKCksXHJcbiAgICAgICAgICAgIGJpcnRoRGF0ZTogYmlydGhEYXRlKCksXHJcbiAgICAgICAgICAgIGlkOiBjdXN0b21lcklkLFxyXG4gICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQoKSxcclxuICAgICAgICAgICAgZ2VuZGVyOiBnZW5kZXIoKSxcclxuICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZSgpLFxyXG4gICAgICAgICAgICBjb21wYW55OiBjb21wYW55KClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvYWRDdXN0b21lclByb3BlcnRpZXMocmVjZWl2ZWRDdXN0b21lcikge1xyXG4gICAgICAgIGN1c3RvbWVySWQgPSByZWNlaXZlZEN1c3RvbWVyLmlkO1xyXG4gICAgICAgIGlzQ29tcGFueShyZWNlaXZlZEN1c3RvbWVyLmlzQ29tcGFueSk7XHJcbiAgICAgICAgbmFtZShyZWNlaXZlZEN1c3RvbWVyLm5hbWUpO1xyXG4gICAgICAgIGZpcnN0U3VybmFtZShyZWNlaXZlZEN1c3RvbWVyLmZpcnN0U3VybmFtZSk7XHJcbiAgICAgICAgc2Vjb25kU3VybmFtZShyZWNlaXZlZEN1c3RvbWVyLnNlY29uZFN1cm5hbWUpO1xyXG4gICAgICAgIHRheElkKHJlY2VpdmVkQ3VzdG9tZXIudGF4SWQpO1xyXG4gICAgICAgIGFkZHJlc3MocmVjZWl2ZWRDdXN0b21lci5hZGRyZXNzKTtcclxuICAgICAgICBjaXR5KHJlY2VpdmVkQ3VzdG9tZXIuY2l0eSk7XHJcbiAgICAgICAgc3RhdGUocmVjZWl2ZWRDdXN0b21lci5zdGF0ZSk7XHJcbiAgICAgICAgY291bnRyeShyZWNlaXZlZEN1c3RvbWVyLmNvdW50cnkpO1xyXG4gICAgICAgIHBob25lTnVtYmVyKHJlY2VpdmVkQ3VzdG9tZXIucGhvbmVOdW1iZXIpO1xyXG4gICAgICAgIGVtYWlsKHJlY2VpdmVkQ3VzdG9tZXIuZW1haWwpO1xyXG4gICAgICAgIGJpcnRoRGF0ZShyZWNlaXZlZEN1c3RvbWVyLmJpcnRoRGF0ZSk7XHJcbiAgICAgICAgaWQocmVjZWl2ZWRDdXN0b21lci5pZCk7XHJcbiAgICAgICAgZGlzYWJsZWQocmVjZWl2ZWRDdXN0b21lci5kaXNhYmxlZCk7XHJcbiAgICAgICAgZ2VuZGVyKHJlY2VpdmVkQ3VzdG9tZXIuZ2VuZGVyIHx8IHVuZGVmaW5lZCkgO1xyXG4gICAgICAgIHBvc3RhbENvZGUocmVjZWl2ZWRDdXN0b21lci5wb3N0YWxDb2RlKTtcclxuICAgICAgICBjb21wYW55KHJlY2VpdmVkQ3VzdG9tZXIuY29tcGFueSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNldElzQ29tcGFueShpc0NvbXBhbnlWYWx1ZSl7XHJcbiAgICAgICAgaXNDb21wYW55KGlzQ29tcGFueVZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc05hbWVNaXNzaW5nKCl7XHJcbiAgICAgICAgcmV0dXJuIG5hbWUoKSA9PSBcIlwiIHx8IG5hbWUoKSA9PSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpc1Nob3duLFxyXG4gICAgICAgIGhpZGUsXHJcbiAgICAgICAgc2hvdyxcclxuICAgICAgICBjYW5TYXZlQ3VzdG9tZXIsXHJcbiAgICAgICAgY3JlYXRlQ3VzdG9tZXIsXHJcbiAgICAgICAgc2VhcmNoQnlUYXhJZCxcclxuICAgICAgICBzZWFyY2hMaWtlTmFtZSxcclxuICAgICAgICBpc0NvbXBhbnksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBmaXJzdFN1cm5hbWUsXHJcbiAgICAgICAgc2Vjb25kU3VybmFtZSxcclxuICAgICAgICB0YXhJZCxcclxuICAgICAgICBhZGRyZXNzLFxyXG4gICAgICAgIHN0YXRlLFxyXG4gICAgICAgIGNvdW50cnksXHJcbiAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgYmlydGhEYXRlLFxyXG4gICAgICAgIGNpdHksXHJcbiAgICAgICAgY29tcGFueSxcclxuICAgICAgICBjdXN0b21lclNlbGVjdG9yLFxyXG4gICAgICAgIGF2YWlsYWJsZUNvdW50cmllcyxcclxuICAgICAgICBpc0VkaXRpb24sXHJcbiAgICAgICAgc2hvd0NhbmNlbCxcclxuICAgICAgICBpZCxcclxuICAgICAgICBkaXNhYmxlZCxcclxuICAgICAgICBnZW5kZXIsXHJcbiAgICAgICAgcG9zdGFsQ29kZSxcclxuICAgICAgICBzYXZlQ3VzdG9tZXIsXHJcbiAgICAgICAgaXNNaXNzaW5nLFxyXG4gICAgICAgIGlzTmFtZU1pc3NpbmcsXHJcbiAgICAgICAgc2V0SXNDb21wYW55LFxyXG4gICAgICAgIHRyYW5zbGF0b3IsXHJcbiAgICAgICAgZ2VuZGVyT3B0aW9ucyxcclxuICAgICAgICBwcm9wczoge1xyXG4gICAgICAgICAgICBpc1Nob3duLFxyXG4gICAgICAgICAgICBoaWRlLFxyXG4gICAgICAgICAgICBzaG93LFxyXG4gICAgICAgICAgICBjYW5TYXZlQ3VzdG9tZXIsXHJcbiAgICAgICAgICAgIGNyZWF0ZUN1c3RvbWVyLFxyXG4gICAgICAgICAgICBzZWFyY2hCeVRheElkLFxyXG4gICAgICAgICAgICBzZWFyY2hMaWtlTmFtZSxcclxuICAgICAgICAgICAgaXNDb21wYW55LFxyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICBmaXJzdFN1cm5hbWUsXHJcbiAgICAgICAgICAgIHNlY29uZFN1cm5hbWUsXHJcbiAgICAgICAgICAgIHRheElkLFxyXG4gICAgICAgICAgICBhZGRyZXNzLFxyXG4gICAgICAgICAgICBzdGF0ZSxcclxuICAgICAgICAgICAgY291bnRyeSxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBiaXJ0aERhdGUsXHJcbiAgICAgICAgICAgIGNpdHksXHJcbiAgICAgICAgICAgIGNvbXBhbnksXHJcbiAgICAgICAgICAgIGN1c3RvbWVyU2VsZWN0b3IsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUNvdW50cmllcyxcclxuICAgICAgICAgICAgaXNFZGl0aW9uLFxyXG4gICAgICAgICAgICBzaG93Q2FuY2VsLFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgZGlzYWJsZWQsXHJcbiAgICAgICAgICAgIGdlbmRlcixcclxuICAgICAgICAgICAgcG9zdGFsQ29kZSxcclxuICAgICAgICAgICAgc2F2ZUN1c3RvbWVyLFxyXG4gICAgICAgICAgICBpc01pc3NpbmcsXHJcbiAgICAgICAgICAgIGlzTmFtZU1pc3NpbmcsXHJcbiAgICAgICAgICAgIHNldElzQ29tcGFueSxcclxuICAgICAgICAgICAgdHJhbnNsYXRvcixcclxuICAgICAgICAgICAgZ2VuZGVyT3B0aW9uc1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDdXN0b21lclNlbGVjdG9yKHdoZW5JdGVtU2VsZWN0ZWQsbm9TZWxlY3Rpb25DYWxsYmFjaykge1xyXG4gICAgbGV0IHZpc2libGUgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICAgIGxldCBzZWxlY3RhYmxlQ3VzdG9tZXJzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XHJcbiAgICBsZXQgbWFuZGF0b3J5U2VsZWN0aW9uID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvdyhjdXN0b21lcnMpIHtcclxuICAgICAgICBtYW5kYXRvcnlTZWxlY3Rpb24oZmFsc2UpOyAgICAgICAgXHJcbiAgICAgICAgc2hvd01vZGFsKGN1c3RvbWVycyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1dpdGhNYW5kYXRvcnlTZWxlY3Rpb24oY3VzdG9tZXJzKSB7XHJcbiAgICAgICAgbWFuZGF0b3J5U2VsZWN0aW9uKHRydWUpO1xyXG4gICAgICAgIHNob3dNb2RhbChjdXN0b21lcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dNb2RhbChjdXN0b21lcnMpIHtcclxuICAgICAgICB2aXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHNlbGVjdGFibGVDdXN0b21lcnMoKS5sZW5ndGggPSAwO1xyXG4gICAgICAgIGtvLnV0aWxzLmFycmF5UHVzaEFsbChzZWxlY3RhYmxlQ3VzdG9tZXJzLCBfLm1hcChjdXN0b21lcnMsICh4KSA9PiBTZWxlY3RhYmxlQ3VzdG9tZXIoeCwgc2VsZWN0KSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlbGVjdChzZWxlY3RlZCkge1xyXG4gICAgICAgIHZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PndoZW5JdGVtU2VsZWN0ZWQoc2VsZWN0ZWQpLCA1MDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RXaXRob3V0VGltZW91dChzZWxlY3RlZCkge1xyXG4gICAgICAgIHZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHdoZW5JdGVtU2VsZWN0ZWQoc2VsZWN0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsb3NlKCl7XHJcbiAgICAgICAgdmlzaWJsZShmYWxzZSk7ICAgXHJcbiAgICAgICAgc2V0VGltZW91dCgoKT0+IG5vU2VsZWN0aW9uQ2FsbGJhY2soKSwgNTAwKTsgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB7IHZpc2libGUsIHNlbGVjdGFibGVDdXN0b21lcnMsIHNob3csIHNob3dXaXRoTWFuZGF0b3J5U2VsZWN0aW9uLCBzZWxlY3QsIHNlbGVjdFdpdGhvdXRUaW1lb3V0LCBjbG9zZSwgbWFuZGF0b3J5U2VsZWN0aW9uIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3RhYmxlQ3VzdG9tZXIoY3VzdG9tZXIsIHdoZW5TZWxlY3RlZCkge1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlbGVjdCgpIHtcclxuICAgICAgICB3aGVuU2VsZWN0ZWQoY3VzdG9tZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHNlbGVjdCwgY3VzdG9tZXIgfTtcclxufSIsImV4cG9ydCBmdW5jdGlvbiBleHBvcnRBcGkoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgfTtcclxufVxyXG5cclxuY29uc3QgYWlkYUN1c3RvbWVycyA9IHJlcXVpcmUoJ2FpZGEtY3VzdG9tZXJzJykuZXhwb3J0QXBpKCk7XHJcbndpbmRvdy5haWRhQ3VzdG9tZXJzID0gYWlkYUN1c3RvbWVyczsiXX0=
