export default function KnockoutExtensionNumber(ko) {
    function defineKnockoutNumberBinding(culture) {

        ko.bindingHandlers.numberText = {
            update: (element, valueAccessor, allBindings) => {
                setFormatNumber(element, valueAccessor, allBindings);
            }
        };

        function setFormatNumber(element, valueAccessor, allBindings) {
            const value = ko.unwrap(valueAccessor());
            let minimumDigits = allBindings.get("minimumDigits");
            if (minimumDigits == undefined) {
                minimumDigits = 2;
            }
            const numberAsText = value != undefined ? value.toLocaleString(culture.name, { minimumFractionDigits: minimumDigits, maximumFractionDigits: 2 }) : '';
            ko.utils.setTextContent(element, numberAsText);            
        }
        
    }

    return {
        defineKnockoutNumberBinding
    };

}