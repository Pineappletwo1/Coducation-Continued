export default function Combination(root, items, dialogPublisher, translator) {
    let whenSelectedCallback = () => { };

    function select() {
        if (anyEquipmentIsNotInCatalog()) {
            dialogPublisher.error({ title: translator.translate("Configurator.AnyEquipmentIsNotInCatalog.Error") });
            return;
        }
        whenSelectedCallback(self);
    }

    function anyEquipmentIsNotInCatalog() {
        return _.find(items, (x) => !x.isInCatalog()) != undefined;
    }

    function selectItems() {
        root.selected(true);
        _.each(items, (x) => x.selected(true));
    }

    function whenSelected(callback) {
        whenSelectedCallback = callback;
    }

    let self = {
        root,
        items,
        select,
        whenSelected,
        selectItems
    };

    return self;
}