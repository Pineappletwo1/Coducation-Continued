using System.Linq;
using System.Net.Http;
using Configurator.Business.Universal.Configurations.Domain.Dto;
using Newtonsoft.Json;

namespace Configurator.Web.Infrastructure {
    
    public static class RequestReader {
        public static ModelConfigurationDto ExtractConfigurationFrom(HttpRequestMessage request) {
            var configurationHeader = request.Headers.GetValues("configuration").First();
            return JsonConvert.DeserializeObject<ModelConfigurationDto>(configurationHeader);
        }
    }
}