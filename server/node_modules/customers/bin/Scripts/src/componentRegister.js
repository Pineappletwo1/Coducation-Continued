import { DependencyProviderFactory } from "./dependencyProviderFactory";

export default function ComponentRegister(name, definition) {
    ko.components.register(name, {
        viewModel: {
            createViewModel: (params) => {
                let script = definition.script.create 
                                ? definition.script.create 
                                : definition.script;
                const scriptInstance = script(params, DependencyProviderFactory.get());
                if (definition.script.onCreated) { definition.script.onCreated(scriptInstance, params); }
                return scriptInstance;
            }
        },
        template: definition.template
    });
}